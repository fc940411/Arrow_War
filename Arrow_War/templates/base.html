<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock title%}</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <script type="text/javascript" src="/static/js/jQuery-3.4.1.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">

</head>
<body class='background'>
    {% csrf_token%}
    <div class="row">
        <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3 col-lg-6 col-lg-offset-3 title">
            <p class='title_p'>{% block head %}{% endblock head%}</p>
        </div>   
    </div>

    <div class="row">
        <div class="col-xs-4  col-xs-offset-1 col-sm-2 col-sm-offset-3 col-md-2 col-md-offset-3 col-lg-2 col-lg-offset-3 menu_div">
            <ul class="nav nav-pills nav-stacked menu_ul">
                <li role="presentation" class='menu active' id='menu0'>{% block menu_1 %}{% endblock menu_1%}</li>
                <li role="presentation" class='menu' id='menu1'><a href="#">积分榜</a></li>
                <li role="presentation" class='menu' id='menu2'><a href="#">时长榜</a></li>
                <li role="presentation" class='menu' id='menu3'><a href="#">击杀榜</a></li>
                <li role="presentation" class='menu' id='menu4'><a href="#">玩法</a></li>
                <li role="presentation" class='menu' id='menu5'><a href="#">公告</a></li>
            </ul>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4" id='right_div'>
            
            <div class="div_right" id='div0'>{% block context %}{% endblock context%}</div>
            <div class="div_right" id='div1'>
                <ul class="nav nav-pills nav-stacked personal_ul">
                    <li><span class="label label-danger span" id='scores_n0'>第一名:</span></li>
                    <li><p align='center' id='scores_p0'></p></li>
                    <li><span class="label label-warning span" id='scores_n1'>第二名:</span></li>
                    <li><p align='center' id='scores_p1'></p></li>
                    <li><span class="label label-success span" id='scores_n2'>第三名:</span></li>
                    <li><p align='center' id='scores_p2'></p></li>
                </ul>
            </div>
            <div class="div_right" id='div2'>
                <ul class="nav nav-pills nav-stacked personal_ul">
                    <li><span class="label label-danger span" id='times_n0'>第一名:</span></li>
                    <li><p align='center' id='times_p0'></p></li>
                    <li><span class="label label-warning span" id='times_n1'>第二名:</span></li>
                    <li><p align='center' id='times_p1'></p></li>
                    <li><span class="label label-success span" id='times_n2'>第三名:</span></li>
                    <li><p align='center' id='times_p2'></p></li>
                </ul>
            </div>
            <div class="div_right" id='div3'>
                <ul class="nav nav-pills nav-stacked personal_ul">
                    <li><span class="label label-danger span" id='kills_n0'>第一名:</span></li>
                    <li><p align='center' id='kills_p0'></p></li>
                    <li><span class="label label-warning span" id='kills_n1'>第二名:</span></li>
                    <li><p align='center' id='kills_p1'></p></li>
                    <li><span class="label label-success span" id='kills_n2'>第三名:</span></li>
                    <li><p align='center' id='kills_p2'></p></li>
                </ul>
            </div>
            <div class="div_right" id='div4'>
                <ul class="nav nav-pills nav-stacked personal_ul">
                    <li><span class="label label-info span">PVE</span></li>
                    <li><div>飞机自动向前飞行，按'A'使飞机向左转弯，按'D'使飞机向右转弯，撞击npc或红墙则坠毁</div></li>
                    <li><span class="label label-info span">PVP</span></li>
                    <li><div align='center'>敬请期待~</div></li>
                </ul>
            </div>
            <div class="div_right" id='div5'>
                <ul class="nav nav-pills nav-stacked personal_ul">
                    <li><span class="label label-info span">20200325更新</span></li>
                    <li><div align='center'>1.更新排行榜、玩法和公告栏</div></li>
                    <li><div align='center'>2.pve模式增加手机适配</div></li>
                </ul>
            </div>
        </div>
        
    </div>

    <script type="text/javascript">
        $(function(){
            $('.row').css({
                'margin':0,
            })

            $('.div_right').css({
                'margin':'20px auto',
                'width':$('#right_div').innerWidth(),
                'height':'300px',
                'position':'absolute',
                'background-color':'white',
                'overflow':'hidden',
            })
            
            $('#div0').css({
                'z-index':6,
            })
            $('#div1').css({
                'z-index':5,
                'padding-top':'30px',
                'font-size':'18px',
            })
            $('#div2').css({
                'z-index':4,
                'padding-top':'30px',
                'font-size':'18px',
            })
            $('#div3').css({
                'z-index':3,
                'padding-top':'30px',
                'font-size':'18px',
            })
            $('#div4').css({
                'z-index':2,
                'padding-top':'50px',
            })
            $('#div5').css({
                'z-index':1,
                'padding-top':'50px',   
            })
            
            $('.menu').click(function(){
                $('.menu').removeClass("active")
                $(this).addClass("active")
                $('#div0').css({'z-index':6,})
                $('#div1').css({'z-index':5,})
                $('#div2').css({'z-index':4,})
                $('#div3').css({'z-index':3,})
                $('#div4').css({'z-index':2,})
                $('#div5').css({'z-index':1,})

                if($('#menu0').hasClass('active')){
                    $('#div0').css({'z-index':99,})
                }else if($('#menu1').hasClass('active')){
                    $('#div1').css({'z-index':99,})
                }else if($('#menu2').hasClass('active')){
                    $('#div2').css({'z-index':99,})
                }else if($('#menu3').hasClass('active')){
                    $('#div3').css({'z-index':99,})
                }else if($('#menu4').hasClass('active')){
                    $('#div4').css({'z-index':99,})
                }else if($('#menu5').hasClass('active')){
                    $('#div5').css({'z-index':99,})
                }
            })

            $.ajax({
                'url':'/users/ranking',
                'type':'post',
                'data':{csrfmiddlewaretoken: '{{ csrf_token }}',},
                'datatype':'json',
            }).done(function(data){
                $('#scores_p0').append(data.scores_ranking0)
                $('#scores_p1').append(data.scores_ranking1)
                $('#scores_p2').append(data.scores_ranking2)
                $('#times_p0').append(data.times_ranking0)
                $('#times_p1').append(data.times_ranking1)
                $('#times_p2').append(data.times_ranking2)
                $('#kills_p0').append(data.kills_ranking0)
                $('#kills_p1').append(data.kills_ranking1)
                $('#kills_p2').append(data.kills_ranking2)

                $('#scores_n0').append(data.scores_name0)
                $('#scores_n1').append(data.scores_name1)
                $('#scores_n2').append(data.scores_name2)
                $('#times_n0').append(data.times_name0)
                $('#times_n1').append(data.times_name1)
                $('#times_n2').append(data.times_name2)
                $('#kills_n0').append(data.kills_name0)
                $('#kills_n1').append(data.kills_name1)
                $('#kills_n2').append(data.kills_name2)

            })

            // $(window).bind('orientationchange',function(event){
            //     window.location.reload()
            // })
            // function div_change(){
            //     $('.div_right').css({
            //         'width':$('#right_div').innerWidth(),
            //     })
            //     console.log($('#right_div').innerWidth())
            // }
            var change_phone = window.matchMedia('(orientation: portrait)');
            function onMatchMediaChange(change_phone){
                if(change_phone.matches){
                    $('.div_right').css({
                        'width':$('#right_div').innerWidth(),
                    })
                }else{
                    $('.div_right').css({
                        'width':$('#right_div').innerWidth(),
                    })
                }
            }
            onMatchMediaChange(change_phone);
            change_phone.addListener(onMatchMediaChange)

            {% block script %}{% endblock script%}
        })
    </script>
</body>
</html>